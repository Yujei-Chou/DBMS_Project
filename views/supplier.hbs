<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DBMS</title>
    <link href="css/style.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/dataTables.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.7.1/css/buttons.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/select/1.3.3/css/select.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/datetime/1.1.0/css/dataTables.dateTime.min.css">
	<script src="js/app.js"></script>	
	<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
</head>
<body>
	<div class="ui four item menu">
		<a class="item" href="/employee">員工管理</a>
		<a class="item" href="/client">客戶</a>
		<a class="item" href="/supplier">廠商</a>
		<a class="item" href="/order">訂單</a>	
	</div>
	<br>
	<br>
	<br>
	<br>
	<br>
	<div class="ui grid centered">
        <div class="ui stackable secondary menu">   
            <form class="item" method="POST" action="/get-supplier-inTainan">
                <button class="ui button">位於台南的廠商</button>
            </form>
            <form class="item" method="POST" action="/get-supplier-notInTainan">
                <button class="ui button">其他地區的廠商</button>
            </form>
        </div>            
		<div class="fourteen wide column">
			<table class="ui very compact table">
				<thead>
					<tr>
						<th></th>
						<th>公司名稱</th>
						<th>地址</th>
					</tr>
				</thead>
				<tbody>
                    {{#each data}}
                        <tr class="row_{{SID}}">
                            <td>
                                <i class="edit icon" editSID="{{SID}}"></i>
                            </td>
                            <td>{{Name}}</td>
                            <td>{{Address}}</td>
                        </tr>
                    {{/each}}    
									
				</tbody>
			</table>	
			<div id="hide"></div>
		</div>
		<form class="ui form" id="Sform">
			<div class="field">
				<i class="x icon" style="float: right;"></i>
			</div>
			<div class="field">
				<label>公司名稱</label>
				<input type="text" name="name">
			</div>
			<div class="field">
				<label>地址</label>
				<input type="text" name="address">
			</div>
			<button class="ui button primary" type="submit">Submit</button>
			<input type="hidden" name="query_cond" value="insert">
		</form>		                          

	</div>
	
	
	
</body>
<script>
    $(document).ready(function(){	
		$('body').on('click', '.edit', function(){
			popForm('#Sform')
            let SID = $(this).attr('editSID')
            $('input[name=name]').val($(`.row_${SID} td:nth-child(2)`).html())
            $('input[name=address]').val($(`.row_${SID} td:nth-child(3)`).html())
            $('input[name=query_cond]').val(SID)                  	
		})

/*
        $('body').on('click', '#new', function(){
            popForm('#Sform')
        })
*/
        $('body').on('click', '.x', function(){
            cancel('#Sform')
            $('input[name=name]').val('')
            $('input[name=address]').val('')
            $('input[name=query_cond]').val('insert')    			
        })        
	})
</script>
</html>