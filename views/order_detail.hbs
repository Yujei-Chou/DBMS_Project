<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DBMS</title>
    <link href="css/style.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/dataTables.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.7.1/css/buttons.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/select/1.3.3/css/select.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/datetime/1.1.0/css/dataTables.dateTime.min.css">
	<script src="js/app.js"></script>	
	<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
</head>
<body>
	<div class="ui four item menu">
		<a class="item" href="/employee">員工管理</a>
		<a class="item" href="/client">客戶</a>
		<a class="item">廠商</a>
		<a class="item" href="/order">訂單</a>	
	</div>
	<br>
	<br>
	<br>
	<br>
	<br>    
	<div class="ui grid centered">
        <form class="ui form" id="order_detail_form">
            <div class="four fields">
                <div class="field">
                    <label>訂單編號</label>
                    <input type="text" name="OID" value="7">
                </div>
                <div class="field">
                    <label>狀態</label>
                    <select class="ui dropdown" name="status">
                        <option value="未出貨">未出貨</option>
                        <option value="已出貨">已出貨</option>
                    </select>                    
                </div>
                <div class="field">
                    <label>總金額</label>
                    <input type="text" name="total">
                </div>			
                <div class="field">
                    <label>下訂日期</label>
                    <input type="text" name="orderDate">
                </div>
            </div>
            <div class="four fields">
                <div class="field">
                    <label>客戶姓名</label>
                    <input type="text" name="name">
                </div>
				<div class="field">
					<label>手機號碼</label>
					<input type="text" name="phone" placeholder="987654321">
				</div>
				<div class="field">
					<label>住址</label>
					<input type="text" name="address" placeholder="台南市東區青年路297號2樓">
				</div>
                <div class="field">
                    <label>下定產品種類</label>
                    <div class="ui icon input">
                        <input type="number" name="kind" placeholder="選擇數量">
                        <i class="circular cart plus link icon"></i>
                    </div>
                </div>                	                
            </div>
            <div id="test"></div> 		                							
            <button class="ui button primary" type="submit" style="float: right; width: 15%;">確認</button>
            <button class="ui button" type="submit" style="float: right; width: 15%;">刪除</button>            
            <input type="hidden" name="query_cond" value="insert">
        </form>
    </div>
	
</body>
<script>
    $(document).ready(function(){	
        $('form').css('display', 'block')
		$('body').on('click', '.edit', function(){
			popForm()
            let OID = $(this).attr('editOID')            
            $('input').prop('disabled', true)
            $('input[name=OID]').val(OID)
            $('select[name=status]').val($(`.row_${OID} td:nth-child(3)`).html())
            $('input[name=orderDate]').val($(`.row_${OID} td:nth-child(4)`).html())
            $('input[name=total]').val($(`.row_${OID} td:nth-child(5)`).html())			
            $('input[name=name]').val($(`.row_${OID} td:nth-child(6)`).html())
            if($(`.row_${OID} td:nth-child(3)`).html() == '已出貨'){
                $('select[name=status]').prop('disabled', true)
            }                     	
		})


        $('body').on('click', '#new', function(){
            popForm()
        })

        $('body').on('click', '.x', function(){
            cancel()
            $('input').prop('disabled', false)
            $('select[name=status]').prop('disabled', false)
            $('input[name=OID]').val('')
            $('select[name=status]').val('')
            $('input[name=orderDate]').val('')
            $('input[name=total]').val('')
            $('input[name=name]').val('')

        })

		$('body').on('click', '.plus', function(){
			alert($('input[name=kind]').val())
			for(let i=0; i<$('input[name=kind]').val(); i++){
				$('#test').append(`<div class="two fields">
									<div class="field">
										<label>訂購產品名稱</label>
										<select class="ui dropdown" name="product">
											<option value="1">電視遊樂器</option>
											<option value="2">電視遊樂器搖桿</option>
											<option value="3">電腦外殼</option>
											<option value="4">商用主機</option>
											<option value="5">筆記型電腦</opt6ion>
											<option value="6">鍵盤保護蓋</option>
											<option value="7">無線寬頻分享器</option>
											<option value="8">筆電電池</option>
											<option value="9">掃描器</option>
											<option value="10">主機板</option>
											<option value="11">數位監控卡</option>
											<option value="12">電源供應器</option>
											<option value="13">網路攝影機</option>
											<option value="14">網路線</option>
											<option value="15">行動寶盒</option>
											<option value="16">套裝軟體</option>
											<option value="17">彩色液晶螢幕</option>
											<option value="18">桌上型電腦</option>
											<option value="19">記憶體</option>
											<option value="20">固態硬碟</option>
										
										</select>
									</div>
									<div class="field">
										<label>數量</label>
										<input type="number" name="amount">
									</div>                       
								</div>`)
			}
		})        
	})
</script>
</html>