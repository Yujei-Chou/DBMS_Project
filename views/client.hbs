<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DBMS</title>
    <link href="css/style.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/dataTables.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.7.1/css/buttons.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/select/1.3.3/css/select.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/datetime/1.1.0/css/dataTables.dateTime.min.css">
	<script src="js/app.js"></script>	
	<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
</head>
<body>
	<div class="ui four item menu">
		<a class="item" href="/employee">員工管理</a>
		<a class="item" href="/client">客戶</a>
		<a class="item">廠商</a>
		<a class="item">訂單</a>	
	</div>
	<br>
	<br>
	<br>
	<br>
	<br>
	<div class="ui grid centered">
		<div class="fourteen wide column">
			<div class="ui search">
				<div class="ui input">
				  <input type="text" placeholder="Search Name...">
				</div>
				<div class="ui icon button">
					<i class="search icon"></i>
				</div>
				<div class="results"></div>
			</div>
			<table class="ui very compact table">
				<thead>
					<tr>
						<th></th>
						<th>姓名</th>
						<th>手機</th>
						<th>住址</th>
					</tr>
				</thead>
				<tbody>
                    {{#each data}}
                        <tr class="row_{{CID}}">
                            <td>
                                <i class="edit icon" editCID="{{CID}}"></i>
                            </td>
                            <td>{{Name}}</td>
                            <td>{{Phone}}</td>
                            <td>{{Address}}</td>
                        </tr>
                    {{/each}}    
									
				</tbody>
			</table>
			<div class="ui button" id="new" style="float: right; width: 8%;">新增</div> 	
			<div id="hide"></div>
		</div>
		<div class="center aligned centered grid">
			<form class="ui form">
				<div class="field">
					<i class="x icon" style="float: right;"></i>
				</div>
				<div class="field">
					<label>姓名</label>
					<input type="text" name="name" placeholder="真實姓名">
				</div>
				<div class="field">
					<label>手機號碼</label>
					<input type="text" name="phone" placeholder="987654321">
				</div>
				<div class="field">
					<label>住址</label>
					<input type="text" name="address" placeholder="台南市東區青年路297號2樓">
				</div>							
				<button class="ui button primary" type="submit">Submit</button>
                <input type="hidden" name="query_cond" value="insert">
			</form>
		</div>		
	</div>
	
	
	
</body>
<script>
    $(document).ready(function(){	
		$('body').on('click', '.edit', function(){
			popForm()
            let CID = $(this).attr('editCID')
            $('input[name=name]').val($(`.row_${CID} td:nth-child(2)`).html())
            $('input[name=phone]').val($(`.row_${CID} td:nth-child(3)`).html())
            $('input[name=address]').val($(`.row_${CID} td:nth-child(4)`).html())
            $('input[name=query_cond]').val(CID)                     	
		})


        $('body').on('click', '#new', function(){
            popForm()
        })

        $('body').on('click', '.x', function(){
            cancel()
            $('input[name=name]').val('')
            $('input[name=phone]').val('')
            $('input[name=address]').val('')
            $('input[name=query_cond]').val('insert')    			
        })        
	})
</script>
</html>