<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DBMS</title>
    <link href="css/style.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/dataTables.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.7.1/css/buttons.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/select/1.3.3/css/select.semanticui.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/datetime/1.1.0/css/dataTables.dateTime.min.css">
	<script src="js/app.js"></script>	
	<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
</head>
<body>
	<div class="ui four item menu">
		<a class="item" href="/employee">員工管理</a>
		<a class="item" href="/client">客戶</a>
		<a class="item">廠商</a>
		<a class="item" href="/order">訂單</a>	
	</div>
	<br>
	<br>
	<br>
	<br>
	<br>
	<div class="ui grid centered">
		<div class="fourteen wide column">
			<div class="ui search">
				<div class="ui input">
				  <input type="text" placeholder="Search Name...">
				</div>
				<div class="ui icon button">
					<i class="search icon"></i>
				</div>
				<div class="results"></div>
			</div>
			<table class="ui very compact table">
				<thead>
					<tr>
						<th></th>
						<th>訂單編號</th>
						<th>狀態</th>
						<th>下訂日期</th>
                        <th>總金額</th>
 						<th>客戶姓名</th>                       
					</tr>
				</thead>
				<tbody>
                    {{#each data}}
                        <tr class="row_{{OID}}">
                            <td>
                                <i class="edit icon" editOID="{{OID}}"></i>
                            </td>
                            <td><a href="/order/{{OID}}">{{OID}}</a></td>
                            <td>{{CurrentStatus}}</td>
                            <td>{{OrderDate}}</td>
                            <td>{{Total}}元</td>
                            <td>{{PlaceClient}}</td>
                        </tr>
                    {{/each}}    
									
				</tbody>
			</table>
			<div class="ui button" id="new" style="float: right; width: 8%;">新增</div> 	
			<div id="hide"></div>
		</div>
		<div class="center aligned centered grid">
			<form class="ui form">
				<div class="field">
					<i class="x icon" style="float: right;"></i>
				</div>
				<div class="field">
					<label>訂單編號</label>
					<input type="text" name="OID" value="7">
				</div>
				<div class="field">
					<label>狀態</label>
                    <select class="ui dropdown" name="status">
                        <option value="未出貨">未出貨</option>
                        <option value="已出貨">已出貨</option>
                        <option value="取消訂單">取消訂單</option>
                    </select>                    
				</div>
				<div class="field">
					<label>總金額</label>
					<input type="text" name="total">
				</div>				
				<div class="field">
					<label>下訂日期</label>
					<input type="text" name="orderDate">
				</div>
				<div class="field">
					<label>客戶姓名</label>
					<input type="text" name="name">
				</div>
				<div class="two fields">
                    <div class="field">
                        <label>訂購產品名稱</label>
                        <select class="ui dropdown" name="product">
                            <option value="1">電視遊樂器</option>
                            <option value="2">電視遊樂器搖桿</option>
                            <option value="3">電腦外殼</option>
                            <option value="4">商用主機</option>
                            <option value="5">筆記型電腦</opt6ion>
                            <option value="6">鍵盤保護蓋</option>
                            <option value="7">無線寬頻分享器</option>
                            <option value="8">筆電電池</option>
                            <option value="9">掃描器</option>
                            <option value="10">主機板</option>
                            <option value="11">數位監控卡</option>
                            <option value="12">電源供應器</option>
                            <option value="13">網路攝影機</option>
                            <option value="14">網路線</option>
                            <option value="15">行動寶盒</option>
                            <option value="16">套裝軟體</option>
                            <option value="17">彩色液晶螢幕</option>
                            <option value="18">桌上型電腦</option>
                            <option value="19">記憶體</option>
                            <option value="20">固態硬碟</option>
                        
                        </select>
                    </div>
                    <div class="field">
					    <label>數量</label>
					    <input type="number" name="amount">
                    </div>                       
				</div>		                   		                							
				<button class="ui button primary" type="submit">Submit</button>
                <input type="hidden" name="query_cond" value="insert">
			</form>
		</div>		
	</div>
	
	
	
</body>
<script>
    $(document).ready(function(){	
		$('body').on('click', '.edit', function(){
			popForm()
            let OID = $(this).attr('editOID')            
            $('input').prop('disabled', true)
            $('input[name=OID]').val(OID)
            $('select[name=status]').val($(`.row_${OID} td:nth-child(3)`).html())
            $('input[name=orderDate]').val($(`.row_${OID} td:nth-child(4)`).html())
            $('input[name=total]').val($(`.row_${OID} td:nth-child(5)`).html())			
            $('input[name=name]').val($(`.row_${OID} td:nth-child(6)`).html())
            if($(`.row_${OID} td:nth-child(3)`).html() == '已出貨'){
                $('select[name=status]').prop('disabled', true)
            }                     	
		})


        $('body').on('click', '#new', function(){
            popForm()
        })

        $('body').on('click', '.x', function(){
            cancel()
            $('input').prop('disabled', false)
            $('select[name=status]').prop('disabled', false)
            $('input[name=OID]').val('')
            $('select[name=status]').val('')
            $('input[name=orderDate]').val('')
            $('input[name=total]').val('')
            $('input[name=name]').val('')

        })        
	})
</script>
</html>